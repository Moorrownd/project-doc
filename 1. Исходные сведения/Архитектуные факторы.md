# Архитектурные факторы

## Функциональные требования

**F01:** Регистрация и аутентификация пользователей (Владелец парковочного места, Арендатор, Оператор).  
**F02:** Управление профилем пользователя (редактирование личных данных).  
**F03:** Добавление, редактирование и удаление парковочных мест владельцем.  
**F04:** Управление календарем доступности и тарифами парковочного места.  
**F05:** Поиск парковочных мест на интерактивной карте с фильтрами (дата, время, цена, рейтинг).  
**F06:** Бронирование парковочного места на выбранный временной интервал.  
**F07:** Безналичная онлайн-оплата бронирования с удержанием комиссии платформы.  
**F08:** Автоматическое уведомление владельца и арендатора о бронировании и оплате.  
**F09:** Завершение аренды и автоматический перевод средств владельцу.  
**F10:** Система взаимных отзывов и рейтингов пользователей.  
**F11:** Панель управления оператора системы (управление пользователями, просмотр транзакций).  
**F12:** Разрешение спорных ситуаций оператором системы.  

---

## Нефункциональные требования

### Производительность (Performance)

**PER01:** Время реакции приложения на действия пользователя при редактировании данных не должно превышать 1 секунды.  
**PER02:** Время отображения списков парковочных мест с фильтрами и картой — не более 2 секунд.  
**PER03:** Время создания бронирования — не более 3 секунд.  
**PER04:** Время обработки онлайн-платежа — не более 5–10 секунд(зависит от внешнего платежного сервиса).  
**PER05:** Время отправки уведомлений о бронировании и оплате — не более 2 секунд.  

---

### Масштабируемость (Scalability)

**SCA01:** Ожидаемая нагрузка от одного арендатора:  
- поиск парковок 2–5 раз за сессию;  
- создание 1–2 бронирований;  
- просмотр истории бронирований.  

**SCA02:** Ожидаемая нагрузка от владельца парковочного места:  
- управление календарем и тарифами;  
- просмотр бронирований и доходов.  

**SCA03:** Ожидаемая нагрузка от оператора системы:  
- нерегулярные действия (разрешение споров, просмотр транзакций).  

**SCA04:** Планируемое количество пользователей:  
- на момент запуска — 5 000 пользователей;  
- через 1 год — 15 000 пользователей;  
- через 3 года — 40 000 пользователей;  
- через 5 лет — 80 000 пользователей

---

### Доступность (Availability)

**AVA01:** Допустимый уровень доступности системы — 99.9%. 
**AVA02:** Допустимое окно обслуживания — ночное время(с 01:00 до 05:00 по местному времени).  
**AVA03:** Пользователи должны быть уведомлены о плановых работах заранее.  

---

### Безопасность и аудит (Security)

**SEC01:** Соответствие требованиям Федерального закона №152-ФЗ «О персональных данных».  
**SEC02:** Обработка персональных данных пользователей (ФИО, контактные данные, платежная информация).  
**SEC03:** Использование защищенных каналов передачи данных (HTTPS, JWT).  
**SEC04:** Разграничение прав доступа пользователей на основе ролей (RBAC).  
**SEC05:** Аудит всех значимых действий пользователей (бронирование, оплата, отмена, действия оператора).  
**SEC06:** Контролируемый доступ к интернету для обновлений компонентов системы.  
**SEC07:** Интеграция с внешним платежным сервисом без хранения данных банковских карт в системе.  

---

### Надежность (Durability, Disaster Recovery)

**DUR01:** Ежедневное автоматическое резервное копирование всех баз данных.  
**DUR02:** Хранение резервных копий не менее 30 дней.  
**DUR03:** Автоматическое восстановление сервисов при сбоях.  
**DUR04:** Дублирование критически важных сервисов (Auth, Booking, Payment).  

---

### Мониторинг (Monitoring)

**MON01:** Мониторинг доступности API и микросервисов.  
**MON02:** Мониторинг нагрузки, времени отклика и ошибок.  
**MON03:** Использование стандартных инструментов мониторинга (Prometheus, Grafana или аналоги).  
**MON04:** Логирование действий пользователей и операторов системы.  

---

### Организационные и юридические вопросы  

**LRC01:** Получение согласия пользователя на обработку персональных данных при регистрации.  
**LRC02:** Соблюдение требований законодательства РФ в области электронных платежей.  
**LRC03:** Хранение логов и журналов аудита в соответствии с внутренними регламентами.  
**LRC04:** Регламент обработки пользовательских обращений и споров.  

---

### Локализация и интернационализация (I18n, L10n)

**L10N01:** Поддержка русского языка на момент запуска.  
**L10N02:** Архитектура должна предусматривать возможность добавления других языков.  
**L10N03:** Переводу подлежит только интерфейс, пользовательский контент не переводится.  

---

### Целевые платформы и устройства пользователей

**PLT01:** Веб-приложение:  
- последние версии браузеров Chrome, Firefox, Safari, Edge.  

**PLT02:** Мобильное приложение:  
- Android (версии 9 и выше);  
- iOS (версии 14 и выше).  

**PLT03:** Поддержка смартфонов основных производителей (Samsung, Apple, Xiaomi и др.).  

---

## Ограничения

**LIM01:** Использование внешних платежных сервисов для обработки платежей.  
**LIM02:** Зависимость от сторонних картографических сервисов.  
**LIM03:** Микросервисная архитектура в соответствии с C4-диаграммами.  
**LIM04:** Использование PostgreSQL в качестве основной СУБД.  
**LIM05:** Использование API Gateway для централизованной аутентификации и маршрутизации.  
**LIM06:** Минимальный состав команды — 5 человек (Backend, Frontend, Mobile, QA, DevOps).  

---

## Принципы

**PRN01:** Приоритет безопасности и защиты персональных данных пользователей.  
**PRN02:** Масштабируемость и готовность к росту количества пользователей.  
**PRN03:** Четкое разделение ответственности между микросервисами.  
**PRN04:** Асинхронное взаимодействие сервисов через очередь сообщений.  
**PRN05:** Высокая доступность критически важных бизнес-функций (бронирование и оплата).  
**PRN06:** Логирование и аудит всех значимых действий в системе.  
