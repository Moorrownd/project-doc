@startuml P2P_Parking_Sharing_Container
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

title "P2P Parking Sharing — Диаграмма контейнеров"

Person(owner, "Владелец парковочного места", "Добавляет парковки и управляет доступностью")
Person(driver, "Водитель", "Ищет, бронирует и оплачивает парковку")
Person(operator, "Оператор", "Разрешает споры и управляет системой")

System_Boundary(systemApp, "P2P Parking Sharing System") {

    Container(webApp, "Веб-приложение", "HTML / CSS / JS", "Пользовательский интерфейс для владельцев, водителей и операторов")

        owner --> webApp : "Использует интерфейс"
        driver --> webApp : "Использует интерфейс"
        operator --> webApp : "Использует интерфейс"

    Container(backendApp, "Серверное приложение", "PHP + Symfony", "Монолитное приложение с бизнес-логикой системы")

        webApp --> backendApp : "REST API : HTTPS"

    Container(authModule, "Модуль аутентификации", "Symfony Security + JWT", "Регистрация, вход и проверка прав пользователей")

        backendApp --> authModule : "Аутентификация и авторизация"

    Container(parkingModule, "Модуль парковок", "PHP", "Управление парковочными местами, тарифами и доступностью")

        backendApp --> parkingModule : "Управление парковками"

    Container(bookingModule, "Модуль бронирования", "PHP", "Создание и управление бронированиями")

        backendApp --> bookingModule : "Бронирование парковок"

    Container(paymentModule, "Модуль оплаты", "PHP", "Обработка оплат и комиссий")

        backendApp --> paymentModule : "Оплата бронирований"

    Container(reviewModule, "Модуль отзывов", "PHP", "Отзывы и рейтинги пользователей")

        backendApp --> reviewModule : "Управление отзывами"

    ContainerDb(mainDb, "Общая база данных", "MySQL", "Пользователи, парковки, бронирования, платежи, отзывы")

        authModule --> mainDb : "Чтение / запись данных"
        parkingModule --> mainDb : "Чтение / запись данных"
        bookingModule --> mainDb : "Чтение / запись данных"
        paymentModule --> mainDb : "Чтение / запись данных"
        reviewModule --> mainDb : "Чтение / запись данных"
}

Container_Ext(paymentGateway, "Платежная система", "External API", "Обработка онлайн-платежей")

Container_Ext(mapService, "Картографический сервис", "External API", "Карты и геолокация")

paymentModule --> paymentGateway : "Оплата : HTTPS"
parkingModule --> mapService : "Получение координат : HTTPS"

@enduml